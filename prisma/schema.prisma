generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum MaritalStatus {
  pending
  married
  divorced
}

enum ProposalStatus {
  pending
  accepted
  rejected
}

enum ApprovalStatus {
  pending
  checked
  approved
  rejected
}


/// ===== MODELS =====
model User {
  id            String    @id @default(uuid())
  email         String    @unique
  password      String
  name          String?
  role          String    @default("user")
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  mobile        String?
  address       String?
  age           Int?
  dob           DateTime?
  gender        String?
  image         String?
  signature     String?
  nid           String?   @unique
  status        String?   @db.VarChar(50) @default("active")
}

model KaziApplication {
  id             String   @id @default(uuid())
  kaziId         String?
  name           String
  email          String   @unique
  phone          String   @unique
  nid            String   @unique
  registrationNo String   @unique
  fatherName     String
  motherName     String
  dateOfBirth    DateTime
  gender         String
  religion       String
  address        String
  officeAddress  String
  district       String
  upazila        String
  photo          String?
  status         String   @default("pending")
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model MarriageApplication {
  id String @id @default(uuid())

  groomId          String
  groomFather      String
  groomMother      String
  groomReligion    String
  groomOccupation  String
  groomEducation   String
  groomAddress     String

  brideId          String
  brideFather      String
  brideMother      String
  brideOccupation  String
  brideEducation   String
  brideReligion    String
  brideAddress     String

  kaziId           String?

  proposalDate     DateTime?
  marriageDate     DateTime?
  approvalDate     DateTime?

  maritalStatus    MaritalStatus  @default(pending)
  proposalStatus   ProposalStatus @default(pending)
  approvalStatus   ApprovalStatus @default(pending)

  proposedBy       String

  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([groomId])
  @@index([brideId])
  @@index([kaziId])
}
